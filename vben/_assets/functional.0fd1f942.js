import{k as e,q as t,X as n,a as i,b as o,r,p as s,a0 as a,Y as c,bA as l,f as m,d6 as u,d7 as g}from"./index.4576f530.js";import{C as d}from"./CloseOutlined.479a84fb.js";import{L as f}from"./LeftOutlined.f98369e1.js";import{R as v}from"./RightOutlined.4ffc4a17.js";var p={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(i,o){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){w(e,t,n[t])}))}return e}({},i,o.attrs);return e(n,t(r,{icon:p}),null)};h.displayName="LoadingOutlined",h.inheritAttrs=!1;const _={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0}};var L,b;(b=L||(L={}))[b.LOADING=0]="LOADING",b[b.DONE=1]="DONE",b[b.FAIL=2]="FAIL";const x="img-preview";var O=i({name:"ImagePreview",props:_,setup(e){const t=o({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:0,currentIndex:0,moveX:0,moveY:0,show:e.show}),n=r(null),i=r(null);function u(){!function(){const e=m(n);if(!e)return;e.onmousewheel=p,document.body.addEventListener("DOMMouseScroll",p),document.ondragstart=function(){return!1}}();const{index:i,imageList:o}=e;if(!o||!o.length)throw new Error("imageList is undefined");t.currentIndex=i,b(o[i])}function g(){t.imgScale=1,t.imgRotate=0,t.imgTop=0,t.imgLeft=0}function p(e){(e=e||window.event).delta=e.wheelDelta||-e.detail,e.preventDefault(),e.delta>0&&w(.015),e.delta<0&&w(-.015)}function w(e){t.imgScale<=.2&&e<0||(t.imgScale+=e)}function _(e){t.imgRotate+=e}function L(){const e=m(i);e&&(e.onmousemove=null)}function b(e){t.status=0;const n=new Image;n.src=e,n.onload=()=>{t.currentUrl=e,t.status=1},n.onerror=()=>{t.status=2}}function O(e){e&&e.stopPropagation(),t.show=!1,document.body.removeEventListener("DOMMouseScroll",p),document.ondragstart=null}function y(){g()}function I(e){e=e||window.event,t.moveX=e.clientX,t.moveY=e.clientY;const n=m(i);n&&(n.onmousemove=C)}function C(e){(e=e||window.event).preventDefault();const n=e.clientX-t.moveX,i=e.clientY-t.moveY;t.imgLeft+=n,t.imgTop+=i,t.moveX=e.clientX,t.moveY=e.clientY}const j=s((()=>{const{imgScale:e,imgRotate:n,imgTop:i,imgLeft:o}=t;return{transform:`scale(${e}) rotate(${n}deg)`,marginTop:`${i}px`,marginLeft:`${o}px`}})),D=s((()=>{const{imageList:t}=e;return t.length>1}));a((()=>{e.show&&u(),e.imageList&&g()}));const k=n=>m(D)?c("div",{class:["img-preview__arrow",n],onClick:()=>function(n){const{currentIndex:i}=t,{imageList:o}=e;"left"===n&&(t.currentIndex--,i<=0&&(t.currentIndex=o.length-1)),"right"===n&&(t.currentIndex++,i>=o.length-1&&(t.currentIndex=0)),b(o[t.currentIndex])}(n)},c("left"===n?f:v,null)):null;return()=>t.show&&c("div",{class:x,ref:n,onMouseup:L},c("div",{class:"img-preview-content"},c(l,{indicator:c(h,{style:"font-size: 24px",spin:!0}),spinning:!0,class:["img-preview-image",{hidden:0!==t.status}]}),c("img",{style:m(j),class:["img-preview-image",1===t.status?"":"hidden"],ref:i,src:t.currentUrl,onMousedown:I}),c("div",{class:"img-preview__close",onClick:O},c(d,{class:"img-preview__close-icon"})),(()=>{if(!m(D))return null;const{currentIndex:n}=t,{imageList:i}=e;return c("div",{class:"img-preview__index"},n+1," / ",i.length)})(),c("div",{class:"img-preview__controller"},c("div",{class:"img-preview__controller-item",onClick:()=>w(-.15)},c("img",{src:"./_assets/unscale.50a147e7.svg"})),c("div",{class:"img-preview__controller-item",onClick:()=>w(.15)},c("img",{src:"./_assets/scale.5b254733.svg"})),c("div",{class:"img-preview__controller-item",onClick:y},c("img",{src:"./_assets/resume.7a838909.svg"})),c("div",{class:"img-preview__controller-item",onClick:()=>_(-90)},c("img",{src:"./_assets/unrotate.a3dc2050.svg"})),c("div",{class:"img-preview__controller-item",onClick:()=>_(90)},c("img",{src:"./_assets/p-rotate.54a3ac67.svg"}))),k("left"),k("right")))}});let y=null;function I(t){if(!u)return;const{imageList:n,show:i=!0,index:o=0}=t,r={},s=document.createElement("div");r.imageList=n,r.show=i,r.index=o,y=e(O,r),g(y,s),document.body.appendChild(s)}export{I as c};