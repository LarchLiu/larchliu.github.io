import{a,b as t,a9 as l,p as r,a8 as n,f as e,cd as i,ax as s,o,j as u,m as p,v as c}from"./index.5b8fca6f.js";import{r as d,c as V}from"./animation.5d7ff2fb.js";import{p as m}from"./propTypes.4631211a.js";var f=a({name:"CountTo",props:{startVal:m.number.def(0),endVal:m.number.def(2020),duration:m.number.def(1300),autoplay:m.bool.def(!0),decimals:{type:Number,required:!1,default:0,validator:a=>a>=0},decimal:m.string.def("."),separator:m.string.def(","),prefix:m.string.def(""),suffix:m.string.def(""),useEasing:m.bool.def(!0),easingFn:{type:Function,default:(a,t,l,r)=>l*(1-Math.pow(2,-10*a/r))*1024/1023+t}},emits:["mounted","callback"],setup(a,{emit:o}){const u=t({localStartVal:a.startVal,displayValue:b(a.startVal),printVal:null,paused:!1,localDuration:a.duration,startTime:null,timestamp:null,remaining:null,rAF:null});l((()=>{a.autoplay&&c(),o("mounted")}));const p=r((()=>a.startVal>a.endVal));function c(){const{startVal:t,duration:l}=a;u.localStartVal=t,u.startTime=null,u.localDuration=l,u.paused=!1,u.rAF=d(f)}function m(){u.startTime=null,u.localDuration=+u.remaining,u.localStartVal=+u.printVal,d(f)}function f(t){const{useEasing:l,easingFn:r,endVal:n}=a;u.startTime||(u.startTime=t),u.timestamp=t;const i=t-u.startTime;u.remaining=u.localDuration-i,l?e(p)?u.printVal=u.localStartVal-r(i,0,u.localStartVal-n,u.localDuration):u.printVal=r(i,u.localStartVal,n-u.localStartVal,u.localDuration):e(p)?u.printVal=u.localStartVal-(u.localStartVal-n)*(i/u.localDuration):u.printVal=u.localStartVal+(n-u.localStartVal)*(i/u.localDuration),e(p)?u.printVal=u.printVal<n?n:u.printVal:u.printVal=u.printVal>n?n:u.printVal,u.displayValue=b(u.printVal),i<u.localDuration?u.rAF=d(f):o("callback")}function b(t){const{decimals:l,decimal:r,separator:n,suffix:e,prefix:s}=a;t=Number(t).toFixed(l);const o=(t+="").split(".");let u=o[0];const p=o.length>1?r+o[1]:"",c=/(\d+)(\d{3})/;if(n&&!i(n))for(;c.test(u);)u=u.replace(c,"$1"+n+"$2");return s+u+p+e}return n([()=>a.startVal,()=>a.endVal],(()=>{a.autoplay&&c()})),{count:f,reset:function(){u.startTime=null,V(u.rAF),u.displayValue=b(a.startVal)},resume:m,start:c,pauseResume:function(){u.paused?(m(),u.paused=!1):(V(u.rAF),u.paused=!0)},displayValue:s(u,"displayValue")}}});f.render=function(a,t,l,r,n,e){return o(),u("span",null,p(a.displayValue),1)};const b=c(f);export{b as C};